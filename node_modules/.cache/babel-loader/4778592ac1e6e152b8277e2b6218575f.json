{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\A\\\\reactTesting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\A\\\\reactTesting\\\\src\\\\components\\\\Quiz.js\";\nimport React, { Component, useState, useLayoutEffect, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport './cats.jpg';\n\nfunction Quiz({\n  numRows,\n  rowHeight\n}) {\n  const totalHeight = rowHeight * numRows;\n  const scrollAreaRef = useRef();\n\n  const _useState = useState(document.documentElement.scrollHeight),\n        _useState2 = _slicedToArray(_useState, 2),\n        availableHeight = _useState2[0],\n        setAvailableHeight = _useState2[1];\n\n  const _useState3 = useState(window.scrollY),\n        _useState4 = _slicedToArray(_useState3, 2),\n        scrollTop = _useState4[0],\n        setScrollTop = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        startIndex = _useState6[0],\n        setStartIndex = _useState6[1];\n\n  const _useState7 = useState(0),\n        _useState8 = _slicedToArray(_useState7, 2),\n        endIndex = _useState8[0],\n        setEndIndex = _useState8[1];\n\n  const _useState9 = useState(endIndex - startIndex),\n        _useState10 = _slicedToArray(_useState9, 2),\n        rendered = _useState10[0],\n        setRendered = _useState10[1];\n\n  const items = [];\n  var index = startIndex;\n  const url = \"https://source.unsplash.com/collection/139386/400x400/?sig=\";\n  let tempurl = \"https://source.unsplash.com/collection/139386/400x400/?sig=\";\n\n  const _useState11 = useState(null),\n        _useState12 = _slicedToArray(_useState11, 2),\n        att = _useState12[0],\n        setAttSrc = _useState12[1];\n\n  const randomNum = () => {\n    return Math.floor(Math.random() * 1000);\n  };\n\n  function renderRowAtIndex(index) {\n    return React.createElement(\"div\", {\n      style: {\n        height: rowHeight,\n        padding: \"5px 10px\",\n        fontSize: 24\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, \"Cat #\", index + 1, React.createElement(\"img\", {\n      src: url + index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }));\n  }\n\n  useLayoutEffect(() => {\n    const onScrollHandle = () => {\n      setScrollTop(window.scrollY);\n      setRendered(endIndex - startIndex);\n    };\n\n    setStartIndex(Math.floor(Math.max(scrollTop - rowHeight * 40, 0) / rowHeight));\n    setEndIndex(Math.min(Math.min(startIndex + Math.ceil(availableHeight / rowHeight) + 40, numRows), numRows));\n    window.addEventListener('scroll', onScrollHandle);\n    return () => window.removeEventListener('scroll', onScrollHandle);\n  }, [scrollTop]); //Can add conditional to stop rendering if over certain threshold \n  //for instance while using scrollbar on the side\n  //to prevent overrendering and performance issues due to rapid scrolling\n\n  while (index < endIndex) {\n    items.push(React.createElement(\"li\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, renderRowAtIndex(index)));\n    index = startIndex;\n  } //Better solution for height: totalHeight, scrollbar on load better than \n  //scrollbar max height upfront\n\n\n  return React.createElement(\"div\", {\n    className: \"col-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Smart Rendering\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"This containers purpose is to smartly render only the items visible plus a few outside the viewport.\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"There are currently \", numRows, \" renderable elements and \", rendered, \" rendered elements.\"), React.createElement(\"div\", {\n    style: {\n      height: \"100vh\",\n      width: \"100vw\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      height: rowHeight * rendered,\n      paddingTop: startIndex * rowHeight\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, items)));\n}\n\nexport default Quiz;","map":{"version":3,"sources":["C:\\Users\\A\\reactTesting\\src\\components\\Quiz.js"],"names":["React","Component","useState","useLayoutEffect","useRef","ReactDOM","Quiz","numRows","rowHeight","totalHeight","scrollAreaRef","document","documentElement","scrollHeight","availableHeight","setAvailableHeight","window","scrollY","scrollTop","setScrollTop","startIndex","setStartIndex","endIndex","setEndIndex","rendered","setRendered","items","index","url","tempurl","att","setAttSrc","randomNum","Math","floor","random","renderRowAtIndex","height","padding","fontSize","onScrollHandle","max","min","ceil","addEventListener","removeEventListener","push","width","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component, useState, useLayoutEffect, useRef } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './cats.jpg';\r\n\r\nfunction Quiz({ numRows, rowHeight }) {\r\n\r\n\r\n    const totalHeight = rowHeight * numRows;\r\n    const scrollAreaRef = useRef();\r\n    const [availableHeight, setAvailableHeight] = useState(document.documentElement.scrollHeight);\r\n    const [scrollTop, setScrollTop] = useState(window.scrollY);\r\n    const [startIndex, setStartIndex] = useState(0);\r\n    const [endIndex, setEndIndex] = useState(0);\r\n    const [rendered, setRendered] = useState(endIndex - startIndex);\r\n    const items = [];\r\n    var index = startIndex;\r\n    const url = \"https://source.unsplash.com/collection/139386/400x400/?sig=\";\r\n    let tempurl = \"https://source.unsplash.com/collection/139386/400x400/?sig=\";\r\n    const [att, setAttSrc] = useState(null);\r\n    const randomNum = () => {\r\n      return Math.floor(Math.random() * 1000);\r\n    \r\n    };\r\n    \r\n    \r\n    function renderRowAtIndex(index) {\r\n        return (\r\n          <div style={{height: rowHeight, padding: \"5px 10px\", fontSize: 24}}>\r\n            Cat #{index +1}\r\n            <img src={url + index}></img>\r\n            \r\n          </div>\r\n        );\r\n      }\r\n\r\n\r\n    useLayoutEffect(() => {\r\n        const onScrollHandle = () => {\r\n            setScrollTop(window.scrollY);\r\n            setRendered(endIndex - startIndex);\r\n          };\r\n        setStartIndex(Math.floor(Math.max(scrollTop-(rowHeight*40), 0) / rowHeight));\r\n        setEndIndex(Math.min(Math.min(\r\n            startIndex + Math.ceil(availableHeight/rowHeight) + 40 ,\r\n            numRows\r\n        ), numRows));\r\n        \r\n        window.addEventListener('scroll', onScrollHandle)\r\n\r\n        return () => window.removeEventListener('scroll', onScrollHandle)\r\n    \r\n    }, [scrollTop] );\r\n\r\n    //Can add conditional to stop rendering if over certain threshold \r\n    //for instance while using scrollbar on the side\r\n    //to prevent overrendering and performance issues due to rapid scrolling\r\n\r\n    \r\n\r\n    while (index < endIndex) {\r\n        items.push(<li key={index}>{renderRowAtIndex(index)}</li>);\r\n        index = startIndex;\r\n    }\r\n    \r\n    \r\n    \r\n\r\n    //Better solution for height: totalHeight, scrollbar on load better than \r\n    //scrollbar max height upfront\r\n    \r\n    return (\r\n\r\n        <div className=\"col-12\">\r\n        <h1>Smart Rendering</h1>\r\n        <p>This containers purpose is to smartly render only the items visible plus a few outside the viewport.</p>\r\n        <p>There are currently {numRows} renderable elements and {rendered} rendered elements.</p>\r\n        <div\r\n        style={{ height: \"100vh\", width: \"100vw\"}}\r\n        >\r\n        <div style={{height: (rowHeight * rendered), paddingTop: startIndex * rowHeight}}>\r\n            {items}\r\n        </div>\r\n        </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Quiz;"]},"metadata":{},"sourceType":"module"}